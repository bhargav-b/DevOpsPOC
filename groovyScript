echo 'DevOpsPOC'

echo "New build pipeline"

node {
   stage 'Checkout'
   // Get some code from repository
   git url: 'https://github.com/bhargav-b/DevOpsPOC.git'

   stage 'Build'
   bat "build.bat" // build the project
   
   stage 'Generate Artifact'
   bat "install.bat" // Generate artifact
   
   stage 'Code Qulaity Analysis using Sonar'
   bat "sonar.bat" // run the sonar goal
   
   stage 'Store Artifact into Jfrog'
   def server = Artifactory.server 'JFrog'
  
  def uploadSpec = """{
  "files": [
    {
      "pattern": "**/target/*.war",
      "target": "example-repo-local"
    }
 ]
}"""
server.upload(uploadSpec)
}
